<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.mx/thymeleaf/layout">
<head>
<meta charset="utf-8">
<title layout:title-pattern="$LAYOUT_TITLE - $CONTENT_TITLE">Projet RÃ©servations</title>
<th:block layout:fragment="css"></th:block>
</head>
<body>
<div th:replace="~{fragments/header :: header}">Header here</div>
<div class="container">
<div id="notification" layout:fragment="notification">
<div th:if="${successMessage}" class="alert alert-success">
<p th:text="${successMessage}"></p>
</div>
<div th:if="${errorMessage}" class="alert alert-danger">
<p th:text="${errorMessage}"></p>
</div>
</div>
<div layout:fragment="content">Main content will be inserted here.</div>
</div>
<div th:replace="~{fragments/footer :: footer}">&copy; 2016 The Static Templates</div>
<th:block layout:fragment="scripts"></th:block>
<script th:inline="javascript">
const csrfParam = /*[[${_csrf.parameterName}]]*/ "_csrf";
const csrfToken = /*[[${_csrf.token}]]*/ "";
document.addEventListener('DOMContentLoaded', () => {
    if (!csrfToken) return;
    document.querySelectorAll('form').forEach(form => {
        const method = (form.getAttribute('method') || '').toLowerCase();
        if (method === 'get') return;
        if (form.querySelector(`input[name="${csrfParam}"]`)) return;
        const input = document.createElement('input');
        input.type = 'hidden';
        input.name = csrfParam;
        input.value = csrfToken;
        form.appendChild(input);
    });
});
</script>
</body>
</html>
